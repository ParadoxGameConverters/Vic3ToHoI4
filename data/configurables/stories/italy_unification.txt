unification_italy = {
    category=unification

    trigger={
        tag=ITA
    }

    score=102

    block_category=unification


    focus={
        id = $TAG$_italia_irredenta #start of tree for an italian unifier
        icon = GFX_goal_generic_construction
        tree_starter = yes
        y = 0
        cost = 10
        ai_will_do = {
            factor = 5
        }


        completion_reward = {
            add_political_power = 50
            add_war_support = 0.1
        }
    }

    repeat_focus={ #creates wargoal and ai strategy vs another country that owns a core or claim of ITA
        trigger={
            any_other_country = {
                any_owned_state = {
					OR = {
						has_homeland = north_italian
						has_homeland = south_italian
					}
                }
            }
        }
        focus={
            id = $TAG$_invade_$TARGET_ID$
            icon = GFX_goal_generic_more_territorial_claims
            relative_position_id = $TAG$_italia_irredenta
            x = -1
            y = 1
            cost = 10
            prerequisite = { focus = $TAG$_italia_irredenta }
            
            available = {
                $TARGET_ID$ = {
                    can_ROOT_get_wargoal_on_THIS = yes
                }
            }
            
            ai_will_do = {
                factor = 1
                    modifier = { #don't try it if we're getting our ass kicked
                        factor = 0
                        surrender_progress > 0.01
                    }
                    modifier = { #don't try it if we can't reach them
                        factor = 0
                        $TARGET_ID$ = {
                            NOT = {
                                OR = {
                                    is_neighbor_of = $TAG$
                                    $TARGET_ID$ = {
                                        any_owned_state = {
                                            is_coastal = yes
                                        }
                                    }
                                }
                                
                            }
                        }
                    }
            }
            
            bypass = {
                has_war_with = $TARGET_ID$
            }
            
            will_lead_to_war_with = $TARGET_ID$
            
            select_effect = { #should make AI prepare to invade
                add_ai_strategy = {
                    type = prepare_for_war
                    id = $TARGET_ID$
                    value = 100
                }
            }
            
            completion_reward = { #wargoal would be more appropriate as take_claimed_state or such, maybe
                create_wargoal = {
                    type = annex_everything
                    target = $TARGET_ID$
                }
                add_ai_strategy = {
                    type = conquer
                    id = $TARGET_ID$
                    value = 200
                }
            }
            
        }
    }
    
    decisions_categories={
        sample_decision_category={
            icon=generic_form_nation
            visible={
            }
        }
    }
    
    decisions={
        sample_decision_category={
            decision_one={
            }
            decision_two={
            }
        }
    }

    events={
        country_event={
            id=sample_event
        }
    }
}


unification_italy_2 = {
    category=unification

    trigger = {
        any_primary_culture = {
            has_trait = italophone
        }
        root.capital = { has_homeland_of = { PREV } }
        NAND = {
            exists = c:ITA
            any_state = {
                not = { owner ?= root }
                "has_homeland = Italian"
            }
        }
    }

    score=101

    block_category=unification


    focus={
        id = $TAG$_italia_irredenta #start of tree for an italian unifier
        icon = GFX_goal_generic_construction
        tree_starter = yes
        y = 0
        cost = 10
        ai_will_do = {
            factor = 5
        }


        completion_reward = {
            add_political_power = 50
            add_war_support = 0.1
        }
    }

    repeat_focus={ #creates wargoal and ai strategy vs another country that owns a core or claim of ITA
        trigger={
            any_other_country = {
                any_owned_state = {
                    not = { owner ?= root }
                    "has_homeland = Italian"
                }
            }
        }
        focus={
            id = $TAG$_invade_$TARGET_ID$
            icon = GFX_goal_generic_more_territorial_claims
            relative_position_id = $TAG$_italia_irredenta
            x = -1
            y = 1
            cost = 10
            prerequisite = { focus = $TAG$_italia_irredenta }

            available = {
                $TARGET_ID$ = {
                    can_ROOT_get_wargoal_on_THIS = yes
                }
            }

            ai_will_do = {
                factor = 1
                    modifier = { #don't try it if we're getting our ass kicked
                        factor = 0
                        surrender_progress > 0.01
                    }
                    modifier = { #don't try it if we can't reach them
                        factor = 0
                        $TARGET_ID$ = {
                            NOT = {
                                OR = {
                                    is_neighbor_of = $TAG$
                                    $TARGET_ID$ = {
                                        any_owned_state = {
                                            is_coastal = yes
                                        }
                                    }
                                }

                            }
                        }
                    }
            }

            bypass = {
                has_war_with = $TARGET_ID$
            }

            will_lead_to_war_with = $TARGET_ID$

            select_effect = { #should make AI prepare to invade
                add_ai_strategy = {
                    type = prepare_for_war
                    id = $TARGET_ID$
                    value = 100
                }
            }

            completion_reward = { #wargoal would be more appropriate as take_claimed_state or such, maybe
                create_wargoal = {
                    type = annex_everything
                    target = $TARGET_ID$
                }
                add_ai_strategy = {
                    type = conquer
                    id = $TARGET_ID$
                    value = 200
                }
            }

        }
    }

    focus={
        id = $TAG$_proclaim_unity
        icon = GFX_goal_generic_construction
        tree_starter = yes
        y = 0
        cost = 10
        prerequisite = { repeat_focus = $TAG$_invade_$TARGET_ID$ }
        ai_will_do = {
            factor = 5
        }

        completion_reward = {
            set_cosmetic_tag = ITA_UNIFIED
        }
    }

    decisions_categories={
        sample_decision_category={
            icon=generic_form_nation
            visible={
            }
        }
    }

    decisions={
        sample_decision_category={
            decision_three={
            }
            decision_four={
            }
        }
    }
    
    events={
        country_event={
            id=sample_event
        }
    }
}